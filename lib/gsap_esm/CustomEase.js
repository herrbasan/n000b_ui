/*!
 * CustomEase 3.2.6
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{stringToRawPath,rawPathToString,transformRawPath}from"./utils/paths.js";var gsap,_coreInitted,_getGSAP=function(){return gsap||"undefined"!=typeof window&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_initCore=function(){(gsap=_getGSAP())&&(gsap.registerEase("_CE",CustomEase.create),_coreInitted=1)},_bigNum=1e20,_round=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},_bonusValidated=1,_numExp=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,_needsParsingExp=/[cLlsSaAhHvVtTqQ]/g,_findMinimum=function(t){var e,n=t.length,i=_bigNum;for(e=1;e<n;e+=6)+t[e]<i&&(i=+t[e]);return i},_normalize=function(t,e,n){n||0===n||(n=Math.max(+t[t.length-1],+t[1]));var i,a=-1*+t[0],s=-n,r=t.length,o=1/(+t[r-2]+a),u=-e||(Math.abs(+t[r-1]-+t[1])<.01*(+t[r-2]-+t[0])?_findMinimum(t)+s:+t[r-1]+s);for(u=u?1/u:-o,i=0;i<r;i+=2)t[i]=(+t[i]+a)*o,t[i+1]=(+t[i+1]+s)*u},_bezierToPoints=function t(e,n,i,a,s,r,o,u,g,h,c){var x,f=(e+i)/2,p=(n+a)/2,d=(i+s)/2,m=(a+r)/2,y=(s+o)/2,_=(r+u)/2,l=(f+d)/2,E=(p+m)/2,P=(d+y)/2,v=(m+_)/2,w=(l+P)/2,b=(E+v)/2,M=o-e,C=u-n,S=Math.abs((i-o)*C-(a-u)*M),T=Math.abs((s-o)*C-(r-u)*M);return h||(h=[{x:e,y:n},{x:o,y:u}],c=1),h.splice(c||h.length-1,0,{x:w,y:b}),(S+T)*(S+T)>g*(M*M+C*C)&&(x=h.length,t(e,n,f,p,l,E,w,b,g,h,c),t(w,b,P,v,y,_,o,u,g,h,c+1+(h.length-x))),h};export var CustomEase=function(){function t(t,e,n){_coreInitted||_initCore(),this.id=t,_bonusValidated&&this.setData(e,n)}var e=t.prototype;return e.setData=function(t,e){e=e||{};var n,i,a,s,r,o,u,g,h,c=(t=t||"0,0,1,1").match(_numExp),x=1,f=[],p=[],d=e.precision||1,m=d<=1;if(this.data=t,(_needsParsingExp.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(c=stringToRawPath(t)[0]),4===(n=c.length))c.unshift(0,0),c.push(1,1),n=8;else if((n-2)%6)throw"Invalid CustomEase";for(0==+c[0]&&1==+c[n-2]||_normalize(c,e.height,e.originY),this.segment=c,s=2;s<n;s+=6)i={x:+c[s-2],y:+c[s-1]},a={x:+c[s+4],y:+c[s+5]},f.push(i,a),_bezierToPoints(i.x,i.y,+c[s],+c[s+1],+c[s+2],+c[s+3],a.x,a.y,1/(2e5*d),f,f.length-1);for(n=f.length,s=0;s<n;s++)u=f[s],g=f[s-1]||u,u.x>g.x||g.y!==u.y&&g.x===u.x||u===g?(g.cx=u.x-g.x,g.cy=u.y-g.y,g.n=u,g.nx=u.x,m&&s>1&&Math.abs(g.cy/g.cx-f[s-2].cy/f[s-2].cx)>2&&(m=0),g.cx<x&&(g.cx?x=g.cx:(g.cx=.001,s===n-1&&(g.x-=.001,x=Math.min(x,.001),m=0)))):(f.splice(s--,1),n--);if(r=1/(n=1/x+1|0),o=0,u=f[0],m){for(s=0;s<n;s++)h=s*r,u.nx<h&&(u=f[++o]),i=u.y+(h-u.x)/u.cx*u.cy,p[s]={x:h,cx:r,y:i,cy:0,nx:9},s&&(p[s-1].cy=i-p[s-1].y);p[n-1].cy=f[f.length-1].y-i}else{for(s=0;s<n;s++)u.nx<s*r&&(u=f[++o]),p[s]=u;o<f.length-1&&(p[s-1]=f[f.length-2])}return this.ease=function(t){var e=p[t*n|0]||p[n-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},this.ease.custom=this,this.id&&gsap.registerEase(this.id,this.ease),this},e.getSVGData=function(e){return t.getSVGData(this,e)},t.create=function(e,n,i){return new t(e,n,i).ease},t.register=function(t){gsap=t,_initCore()},t.get=function(t){return gsap.parseEase(t)},t.getSVGData=function(e,n){var i,a,s,r,o,u,g,h,c,x,f=(n=n||{}).width||100,p=n.height||100,d=n.x||0,m=(n.y||0)+p,y=gsap.utils.toArray(n.path)[0];if(n.invert&&(p=-p,m=0),"string"==typeof e&&(e=gsap.parseEase(e)),e.custom&&(e=e.custom),e instanceof t)i=rawPathToString(transformRawPath([e.segment],f,0,0,-p,d,m));else{for(i=[d,m],r=1/(g=Math.max(5,200*(n.precision||1))),h=5/(g+=2),c=_round(d+r*f),a=((x=_round(m+e(r)*-p))-m)/(c-d),s=2;s<g;s++)o=_round(d+s*r*f),u=_round(m+e(s*r)*-p),(Math.abs((u-x)/(o-c)-a)>h||s===g-1)&&(i.push(c,x),a=(u-x)/(o-c)),c=o,x=u;i="M"+i.join(",")}return y&&y.setAttribute("d",i),i},t}();_getGSAP()&&gsap.registerPlugin(CustomEase),CustomEase.version="3.2.6";export{CustomEase as default};