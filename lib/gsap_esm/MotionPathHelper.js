/*!
 * MotionPathHelper 3.2.6
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import PathEditor from"./utils/PathEditor.js";var gsap,_win,_doc,_docEl,_body,MotionPathPlugin,_arrayToRawPath,_rawPathToString,_copyElement,_bonusValidated=1,_selectorExp=/(^[#\.][a-z]|[a-y][a-z])/i,_isString=function(t){return"string"==typeof t},_createElement=function(t,e){var o=_doc.createElementNS?_doc.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):_doc.createElement(t);return o.style?o:_doc.createElement(t)},_getPositionOnPage=function(t){var e=t.getBoundingClientRect(),o=_docEl.clientTop-(_win.pageYOffset||_docEl.scrollTop||_body.scrollTop||0),a=_docEl.clientLeft-(_win.pageXOffset||_docEl.scrollLeft||_body.scrollLeft||0);return{left:e.left+a,top:e.top+o,right:e.right+a,bottom:e.bottom+o}},_getInitialPath=function(t,e){var o,a=[0,31,8,58,24,75,40,90,69,100,100,100];for(o=0;o<a.length;o+=2)a[o]+=t,a[o+1]+=e;return"M"+t+","+e+"C"+a.join(",")},_getGlobalTime=function(t){for(var e=t.totalTime();t;)e=t.startTime()+e/(t.timeScale()||1),t=t.parent;return e},_initCopyToClipboard=function(){(_copyElement=_createElement("textarea")).style.display="none",_body.appendChild(_copyElement)},_parsePath=function(t,e,o){return _isString(t)&&_selectorExp.test(t)?_doc.querySelector(t):Array.isArray(t)?_rawPathToString(_arrayToRawPath([{x:gsap.getProperty(e,"x"),y:gsap.getProperty(e,"y")}].concat(t),o)):_isString(t)||t&&"path"===(t.tagName+"").toLowerCase()?t:0},_addCopyToClipboard=function(t,e,o){t.addEventListener("click",(function(a){if(a.target._gsHelper){var n=e(a.target);if(_copyElement.value=n,n&&_copyElement.select){_copyElement.style.display="block",_copyElement.select();try{_doc.execCommand("copy"),_copyElement.blur(),o&&o(t)}catch(t){}_copyElement.style.display="none"}}}))},_identityMatrixObject={matrix:{a:1,b:0,c:0,d:1,e:0,f:0}},_getConsolidatedMatrix=function(t){return(t.transform.baseVal.consolidate()||_identityMatrixObject).matrix},_findMotionPathTween=function(t){for(var e=gsap.getTweensOf(t),o=0;o<e.length;o++){if(e[o].vars.motionPath)return e[o];e[o].timeline&&e.push.apply(e,e[o].timeline.getChildren())}},_initCore=function(t,e){_win=window,gsap=gsap||t||_win.gsap||void 0,_doc=document,_body=_doc.body,_docEl=_doc.documentElement,(MotionPathPlugin=gsap&&gsap.plugins.motionPath)&&(_initCopyToClipboard(),_arrayToRawPath=MotionPathPlugin.arrayToRawPath,_rawPathToString=MotionPathPlugin.rawPathToString)};export var MotionPathHelper=function(){function t(t,e){void 0===e&&(e={}),MotionPathPlugin||_initCore(e.gsap,1);var o,a,n,r,i,s,l,p,c,g,d,h,_,u=_createElement("div"),y=this,f={x:0,y:0};t instanceof gsap.core.Tween?o=(p=t).targets()[0]:(o=gsap.utils.toArray(t)[0],p=_findMotionPathTween(o)),a=_parsePath(e.path,o,e),this.offset=f,s=_getPositionOnPage(o),r=parseFloat(gsap.getProperty(o,"x","px")),i=parseFloat(gsap.getProperty(o,"y","px")),n=o.getCTM&&"svg"!==o.tagName.toLowerCase(),p&&!a&&(a=_parsePath(p.vars.motionPath.path||p.vars.motionPath,o,p.vars.motionPath)),u.setAttribute("class","copy-motion-path"),u.style.cssText="border-radius:8px; background-color:rgba(85, 85, 85, 0.7); color:#fff; cursor:pointer; padding:6px 12px; font-family:Signika Negative, Arial, sans-serif; position:fixed; left:50%; transform:translate(-50%, 0); font-size:19px; bottom:10px",u.innerText="COPY MOTION PATH",u._gsHelper=y,(gsap.utils.toArray(e.container)[0]||_body).appendChild(u),_addCopyToClipboard(u,(function(){return y.getString()}),(function(){return gsap.fromTo(u,{backgroundColor:"white"},{duration:.5,backgroundColor:"rgba(85, 85, 85, 0.6)"})})),(l=a&&a.ownerSVGElement)||(c=n&&o.ownerSVGElement&&o.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg",n?(l=o.ownerSVGElement,g=o.getBBox(),r=(d=_getConsolidatedMatrix(o)).e,i=d.f,f.x=g.x,f.y=g.y):(l=_createElement("svg",c),_body.appendChild(l),l.setAttribute("viewBox","0 0 100 100"),l.style.cssText="overflow:visible; background-color: transparent; position:absolute; width:100px; height:100px; top:"+s.top+"px; left:"+s.left+"px;"),g=_isString(a)&&!_selectorExp.test(a)?a:_getInitialPath(r,i),(a=_createElement("path",c)).setAttribute("d",g),a.setAttribute("vector-effect","non-scaling-stroke"),a.style.cssText="fill:transparent; stroke-width:"+(e.pathWidth||3)+"; stroke:"+(e.pathColor||"#555")+"; opacity:"+(e.pathOpacity||.6),l.appendChild(a),(f.x||f.y)&&gsap.set(a,{x:f.x,y:f.y})),"selected"in e||(e.selected=!0),"anchorSnap"in e||(e.anchorSnap=function(t){t.x*t.x+t.y*t.y<16&&(t.x=t.y=0)}),_=p&&"nested"===p.parent.data?p.parent.parent:p,e.onPress=function(){_.pause(0)},h=function(){p.invalidate(),_.restart()},e.onRelease=e.onDeleteAnchor=h,this.editor=PathEditor.create(a,e),e.center&&gsap.set(o,{transformOrigin:"50% 50%",xPercent:-50,yPercent:-50}),p?(p.vars.motionPath.path?p.vars.motionPath.path=a:p.vars.motionPath={path:a},_.parent!==gsap.globalTimeline&&gsap.globalTimeline.add(_,_getGlobalTime(_)-_.delay()),_.repeat(-1).repeatDelay(1)):p=_=gsap.to(o,{motionPath:{path:a,start:e.start||0,end:"end"in e?e.end:1,autoRotate:"autoRotate"in e&&e.autoRotate,align:a,alignOrigin:e.alignOrigin},duration:e.duration||5,ease:e.ease||"power1.inOut",repeat:-1,repeatDelay:1,paused:!e.path}),this.animation=p}return t.prototype.getString=function(){return this.editor.getString(!0,-this.offset.x,-this.offset.y)},t}();MotionPathHelper.register=_initCore,MotionPathHelper.create=function(t,e){return new MotionPathHelper(t,e)},MotionPathHelper.version="3.2.6";export{MotionPathHelper as default};