/*!
 * SplitText: 3.2.6
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
import{emojiExp,getText}from"./utils/strings.js";var _doc,_win,_coreInitted,_stripExp=/(?:\r|\n|\t\t)/g,_multipleSpacesExp=/(?:\s\s+)/g,_initCore=function(){_doc=document,_win=window,_coreInitted=1},_bonusValidated=1,_getComputedStyle=function(e){return _win.getComputedStyle(e)},_isArray=Array.isArray,_slice=[].slice,_toArray=function(e,t){var i;return _isArray(e)?e:"string"==(i=typeof e)&&!t&&e?_slice.call(_doc.querySelectorAll(e),0):e&&"object"===i&&"length"in e?_slice.call(e,0):e?[e]:[]},_isAbsolute=function(e){return"absolute"===e.position||!0===e.absolute},_findSpecialChars=function(e,t){for(var i,s=t.length;--s>-1;)if(i=t[s],e.substr(0,i.length)===i)return i.length},_divStart=" style='position:relative;display:inline-block;'",_cssClassFunc=function(e,t){void 0===e&&(e="");var i=~e.indexOf("++"),s=1;return i&&(e=e.split("++").join("")),function(){return"<"+t+_divStart+(e?" class='"+e+(i?s++:"")+"'>":">")}},_swapText=function e(t,i,s){var n=t.nodeType;if(1===n||9===n||11===n)for(t=t.firstChild;t;t=t.nextSibling)e(t,i,s);else 3!==n&&4!==n||(t.nodeValue=t.nodeValue.split(i).join(s))},_pushReversed=function(e,t){for(var i=t.length;--i>-1;)e.push(t[i])},_isBeforeWordDelimiter=function(e,t,i){for(var s;e&&e!==t;){if(s=e._next||e.nextSibling)return s.textContent.charAt(0)===i;e=e.parentNode||e._parent}},_deWordify=function e(t){var i,s,n=_toArray(t.childNodes),r=n.length;for(i=0;i<r;i++)(s=n[i])._isSplit?e(s):(i&&3===s.previousSibling.nodeType?s.previousSibling.nodeValue+=3===s.nodeType?s.nodeValue:s.firstChild.nodeValue:3!==s.nodeType&&t.insertBefore(s.firstChild,s),t.removeChild(s))},_getStyleAsNumber=function(e,t){return parseFloat(t[e])||0},_setPositionsAfterSplit=function(e,t,i,s,n,r,l){var o,a,p,d,h,_,c,u,f,g,x,y,S=_getComputedStyle(e),b=_getStyleAsNumber("paddingLeft",S),m=-999,v=_getStyleAsNumber("borderBottomWidth",S)+_getStyleAsNumber("borderTopWidth",S),C=_getStyleAsNumber("borderLeftWidth",S)+_getStyleAsNumber("borderRightWidth",S),N=_getStyleAsNumber("paddingTop",S)+_getStyleAsNumber("paddingBottom",S),A=_getStyleAsNumber("paddingLeft",S)+_getStyleAsNumber("paddingRight",S),T=.2*_getStyleAsNumber("fontSize",S),w=S.textAlign,L=[],W=[],B=[],E=t.wordDelimiter||" ",R=t.tag?t.tag:t.span?"span":"div",H=t.type||t.split||"chars,words,lines",V=n&&~H.indexOf("lines")?[]:null,j=~H.indexOf("words"),O=~H.indexOf("chars"),F=_isAbsolute(t),M=t.linesClass,D=~(M||"").indexOf("++"),k=[];for(D&&(M=M.split("++").join("")),p=(a=e.getElementsByTagName("*")).length,h=[],o=0;o<p;o++)h[o]=a[o];if(V||F)for(o=0;o<p;o++)((_=(d=h[o]).parentNode===e)||F||O&&!j)&&(y=d.offsetTop,V&&_&&Math.abs(y-m)>T&&("BR"!==d.nodeName||0===o)&&(c=[],V.push(c),m=y),F&&(d._x=d.offsetLeft,d._y=y,d._w=d.offsetWidth,d._h=d.offsetHeight),V&&((d._isSplit&&_||!O&&_||j&&_||!j&&d.parentNode.parentNode===e&&!d.parentNode._isSplit)&&(c.push(d),d._x-=b,_isBeforeWordDelimiter(d,e,E)&&(d._wordEnd=!0)),"BR"===d.nodeName&&(d.nextSibling&&"BR"===d.nextSibling.nodeName||0===o)&&V.push([])));for(o=0;o<p;o++)_=(d=h[o]).parentNode===e,"BR"!==d.nodeName?(F&&(f=d.style,j||_||(d._x+=d.parentNode._x,d._y+=d.parentNode._y),f.left=d._x+"px",f.top=d._y+"px",f.position="absolute",f.display="block",f.width=d._w+1+"px",f.height=d._h+"px"),!j&&O?d._isSplit?(d._next=d.nextSibling,d.parentNode.appendChild(d)):d.parentNode._isSplit?(d._parent=d.parentNode,!d.previousSibling&&d.firstChild&&(d.firstChild._isFirst=!0),d.nextSibling&&" "===d.nextSibling.textContent&&!d.nextSibling.nextSibling&&k.push(d.nextSibling),d._next=d.nextSibling&&d.nextSibling._isFirst?null:d.nextSibling,d.parentNode.removeChild(d),h.splice(o--,1),p--):_||(y=!d.nextSibling&&_isBeforeWordDelimiter(d.parentNode,e,E),d.parentNode._parent&&d.parentNode._parent.appendChild(d),y&&d.parentNode.appendChild(_doc.createTextNode(" ")),"span"===R&&(d.style.display="inline"),L.push(d)):d.parentNode._isSplit&&!d._isSplit&&""!==d.innerHTML?W.push(d):O&&!d._isSplit&&("span"===R&&(d.style.display="inline"),L.push(d))):V||F?(d.parentNode&&d.parentNode.removeChild(d),h.splice(o--,1),p--):j||e.appendChild(d);for(o=k.length;--o>-1;)k[o].parentNode.removeChild(k[o]);if(V){for(F&&(g=_doc.createElement(R),e.appendChild(g),x=g.offsetWidth+"px",y=g.offsetParent===e?0:e.offsetLeft,e.removeChild(g)),f=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(u=" "===E&&(!F||!j&&!O),o=0;o<V.length;o++){for(c=V[o],(g=_doc.createElement(R)).style.cssText="display:block;text-align:"+w+";position:"+(F?"absolute;":"relative;"),M&&(g.className=M+(D?o+1:"")),B.push(g),p=c.length,a=0;a<p;a++)"BR"!==c[a].nodeName&&(d=c[a],g.appendChild(d),u&&d._wordEnd&&g.appendChild(_doc.createTextNode(" ")),F&&(0===a&&(g.style.top=d._y+"px",g.style.left=b+y+"px"),d.style.top="0px",y&&(d.style.left=d._x-y+"px")));0===p?g.innerHTML="&nbsp;":j||O||(_deWordify(g),_swapText(g,String.fromCharCode(160)," ")),F&&(g.style.width=x,g.style.height=d._h+"px"),e.appendChild(g)}e.style.cssText=f}F&&(l>e.clientHeight&&(e.style.height=l-N+"px",e.clientHeight<l&&(e.style.height=l+v+"px")),r>e.clientWidth&&(e.style.width=r-A+"px",e.clientWidth<r&&(e.style.width=r+C+"px"))),_pushReversed(i,L),j&&_pushReversed(s,W),_pushReversed(n,B)},_splitRawText=function(e,t,i,s){var n,r,l,o,a,p,d,h,_=t.tag?t.tag:t.span?"span":"div",c=~(t.type||t.split||"chars,words,lines").indexOf("chars"),u=_isAbsolute(t),f=t.wordDelimiter||" ",g=" "!==f?"":u?"&#173; ":" ",x="</"+_+">",y=1,S=t.specialChars?"function"==typeof t.specialChars?t.specialChars:_findSpecialChars:null,b=_doc.createElement("div"),m=e.parentNode;for(m.insertBefore(b,e),b.textContent=e.nodeValue,m.removeChild(e),d=-1!==(n=getText(e=b)).indexOf("<"),!1!==t.reduceWhiteSpace&&(n=n.replace(_multipleSpacesExp," ").replace(_stripExp,"")),d&&(n=n.split("<").join("{{LT}}")),a=n.length,r=(" "===n.charAt(0)?g:"")+i(),l=0;l<a;l++)if(p=n.charAt(l),S&&(h=S(n.substr(l),t.specialChars)))p=n.substr(l,h||1),r+=c&&" "!==p?s()+p+"</"+_+">":p,l+=h-1;else if(p===f&&n.charAt(l-1)!==f&&l){for(r+=y?x:"",y=0;n.charAt(l+1)===f;)r+=g,l++;l===a-1?r+=g:")"!==n.charAt(l+1)&&(r+=g+i(),y=1)}else"{"===p&&"{{LT}}"===n.substr(l,6)?(r+=c?s()+"{{LT}}</"+_+">":"{{LT}}",l+=5):p.charCodeAt(0)>=55296&&p.charCodeAt(0)<=56319||n.charCodeAt(l+1)>=65024&&n.charCodeAt(l+1)<=65039?(o=((n.substr(l,12).split(emojiExp)||[])[1]||"").length||2,r+=c&&" "!==p?s()+n.substr(l,o)+"</"+_+">":n.substr(l,o),l+=o-1):r+=c&&" "!==p?s()+p+"</"+_+">":p;e.outerHTML=r+(y?x:""),d&&_swapText(m,"{{LT}}","<")},_split=function e(t,i,s,n){var r,l,o=_toArray(t.childNodes),a=o.length,p=_isAbsolute(i);if(3!==t.nodeType||a>1){for(i.absolute=!1,r=0;r<a;r++)(3!==(l=o[r]).nodeType||/\S+/.test(l.nodeValue))&&(p&&3!==l.nodeType&&"inline"===_getComputedStyle(l).display&&(l.style.display="inline-block",l.style.position="relative"),l._isSplit=!0,e(l,i,s,n));return i.absolute=p,void(t._isSplit=!0)}_splitRawText(t,i,s,n)};export var SplitText=function(){function e(e,t){_coreInitted||_initCore(),this.elements=_toArray(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},_bonusValidated&&this.split(t)}var t=e.prototype;return t.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,i,s,n=this.elements.length,r=e.tag?e.tag:e.span?"span":"div",l=_cssClassFunc(e.wordsClass,r),o=_cssClassFunc(e.charsClass,r);--n>-1;)s=this.elements[n],this._originals[n]=s.innerHTML,t=s.clientHeight,i=s.clientWidth,_split(s,e,l,o),_setPositionsAfterSplit(s,e,this.chars,this.words,this.lines,i,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){var e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(t,i){return t.innerHTML=e[i]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},e.create=function(t,i){return new e(t,i)},e}();SplitText.version="3.2.6";export{SplitText as default};